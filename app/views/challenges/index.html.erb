<script>
    function resize(img) {
        if (img.width() > img.height()) {
            img.addClass("landscape")
        }
    }

    // $(window).on('load', function() {
    //   $('#main').css({
    //     'opacity':'1',
    //     'transition': 'opacity 0.5s'
    //     });
    // })
</script>


<% provide(:title, "Challenges") %>
<p id="notice"><%= notice %></p>

<main id="main" style="opacity:0">
  <!-- ======= Works Section ======= -->
  <section class="section site-portfolio">
    <div class="container">
      <div class="row mb-5 align-items-center">
        <div class="col-md-12 col-lg-6 mb-4 mb-lg-0">
          <h2>Ready to challenge yourself?</h2>
          <p class="mb-0">Join millions of challenges around the world</p><br>
          <%= render 'shared/add_btn' %>
        </div>

        <div class="col-md-12 col-lg-6" style="margin:6rem 0 0 0">
          <div id="filters" class="filters">
            <a data-filter = 'All' style = 'cursor:pointer'>All</a>
            <a data-filter = 'Life' style = 'cursor:pointer'>Life</a>
            <a data-filter = 'Workout' style = 'cursor:pointer'>Workout</a>
            <a data-filter = 'Habbit' style = 'cursor:pointer'>Habit</a>
            <a data-filter = 'Study' style = 'cursor:pointer'>Study</a>
            <a data-filter = 'philanthropy' style = 'cursor:pointer'>Philanthropy</a>
          </div>
          <%= form_with(url: filter_path, method: :get, remote: true) do |f| %>
            <div class="row align-items-start">

              <div class="col col-6">
                <%= text_field_tag(:q, value = nil, options = {placeholder: "search challenge name", class: "form-control", onkeydown: "doSearch()"}) %>
              </div>
              <%=hidden_field_tag(:filter, nil)%>

              <%= submit_tag("Search", class: "btn btn-primary", style: "display:none") %>
              <!--        </div>-->
            </div>
          <% end %>
        </div>
      </div>

      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-all" role="tabpanel" aria-labelledby="pills-all-tab">
          <div id="portfolio-grid" class="row no-gutter">
            <%= render 'challenges/portfolio', challenges: @challenges %>
          </div>
        </div>
      </div>

    </div>
  </section><!-- End  Works Section -->
</main><!-- End #main -->















<!--<h1>Challenges</h1>-->

<!--<table>-->
<!--  <thead>-->
<!--  <tr>-->
<!--    <th>Name</th>-->
<!--    <th>Category</th>-->
<!--    <th>Description</th>-->
<!--    <th>Coins</th>-->
<!--    <th>Duration</th>-->
<!--    <th>Participant number</th>-->
<!--    <th>Failed number</th>-->
<!--    <th>Deadline</th>-->
<!--    <th colspan="3"></th>-->
<!--  </tr>-->
<!--  </thead>-->

<!--  <tbody>-->
  <%# @challenges.each do |challenge| %>
<!--    <tr>-->
<!--      <td><%#= link_to challenge.name, challenge %></td>-->
<!--      <td><%#= challenge.category %></td>-->
<!--      <td><%#= challenge.description %></td>-->
<!--      <td><%#= challenge.coins %></td>-->
<!--      <td><%#= challenge.duration %></td>-->
<!--      <td><%#= challenge.participant_number %></td>-->
<!--      <td><%#= challenge.failed_number %></td>-->
<!--      <td><%#= challenge.deadline %></td>-->
<!--      <td><%#= link_to 'Participate', "/participate/#{challenge.id}", class: 'readmore', method: :post %></td>-->
<!--      <td><%#= link_to 'Favorite', "/favorite/#{challenge.id}", class: 'readmore', method: :post %></td>-->
<!--       <td><%#= link_to 'Show', challenge %></td>-->
<!--      <td><%#= link_to 'Edit', edit_challenge_path(challenge) %></td>-->
<!--       <td><%#= link_to 'Destroy', challenge, method: :delete, data: {confirm: 'Are you sure?'} %></td>-->
<!--    </tr>-->
  <%# end %>
<!--  </tbody>-->
<!--</table>-->

<!--<br>-->

<%#= render 'shared/add_btn' %>

<script>
    $('#filters a').each(function() {
        $(this).on('click', function(){
            $('#filter').val($(this).data("filter"))
            doSearch()

        })
    })

    function doSearch() {
        $('form input[value="Search"]').click()
    }

    // $(() => {
    //   $('img').each(function(){
    //       if ($(this).width() > $(this).height()) {
    //         $(this).addClass("landscape")
    //       }
    //     })
    // })


    // $(window).on('load', function() {
    //   $('img').each(function(){
    //     //console.log($(this))
    //     //getDim($(this))
    //     if ($(this).width() > $(this).height()) {
    //       $(this).addClass("landscape")
    //     }
    //   })
    // })

    //   document.addEventListener(" turbolinks:load", function() {
    //       $('img').each(function(){
    //       //console.log($(this))
    //       //getDim($(this))
    //       if ($(this).width() > $(this).height()) {
    //         $(this).addClass("landscape")
    //       }
    //     })
    // })
</script>


<%# <script>

        $('#main').css({
          'opacity':'1',
          'transition': 'opacity 0.5s'
          });

    </script> %>
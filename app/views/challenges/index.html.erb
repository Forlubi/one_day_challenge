<script>
    function resize(img) {
        if (img.width() > img.height()) {
            img.addClass("landscape")
        }
    }

    // $(window).on('load', function() {
    //   $('#main').css({
    //     'opacity':'1',
    //     'transition': 'opacity 0.5s'
    //     });
    // })
</script>


<% provide(:title, "Challenges") %>
<p id="notice"><%= notice %></p>

<main id="main" style="opacity:0">
  <!-- ======= Works Section ======= -->
  <section class="section site-portfolio">
    <div class="container">
      <div class="row mb-5 align-items-center">
        <div class="col-md-12 col-lg-6 mb-4 mb-lg-0" data-aos="fade-up">
          <h2>Ready to challenge yourself?</h2>
          <p class="mb-0">Join millions of challenges around the world</p>
        </div>

        <div class="col-md-12 col-lg-6 text-left text-lg-right" data-aos="fade-up" data-aos-delay="100">
          <div id="filters" class="filters">
            <%= link_to "All", "/filter/#{'All'}", remote: true, class: 'active' %>
            <%= link_to "Life", "/filter/#{'Life'}", remote: true %>
            <%= link_to "Workout", "/filter/#{'Workout'}", remote: true %>
            <%= link_to "Habbit", "/filter/#{'Habbit'}", remote: true %>
            <%= link_to "Study", "/filter/#{'Study'}", remote: true %>
            <%= link_to "Philanthropy", "/filter/#{'Philanthropy'}", remote: true %>
          </div>
        </div>
      </div>

      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-all" role="tabpanel" aria-labelledby="pills-all-tab">
          <div id="portfolio-grid" class="row no-gutter" data-aos="fade-up" data-aos-delay="200">
            <%= render 'challenges/portfolio', challenges: @challenges %>
          </div>
        </div>
      </div>

    </div>
    <%= render 'shared/add_btn' %>


  </section><!-- End  Works Section -->
</main><!-- End #main -->

<a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>















<h1>Challenges</h1>

<table>
  <thead>
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Description</th>
    <th>Coins</th>
    <th>Duration</th>
    <th>Participant number</th>
    <th>Failed number</th>
    <th>Deadline</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @challenges.each do |challenge| %>
    <tr>
      <td><%= link_to challenge.name, challenge %></td>
      <td><%= challenge.category %></td>
      <td><%= challenge.description %></td>
      <td><%= challenge.coins %></td>
      <td><%= challenge.duration %></td>
      <td><%= challenge.participant_number %></td>
      <td><%= challenge.failed_number %></td>
      <td><%= challenge.deadline %></td>
      <td><%= link_to 'Participate', "/participate/#{challenge.id}", class: 'readmore', method: :post %></td>
      <td><%= link_to 'Favorite', "/favorite/#{challenge.id}", class: 'readmore', method: :post %></td>
      <!-- <td><%= link_to 'Show', challenge %></td> -->
      <td><%= link_to 'Edit', edit_challenge_path(challenge) %></td>
      <!-- <td><%= link_to 'Destroy', challenge, method: :delete, data: {confirm: 'Are you sure?'} %></td> -->
    </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= render 'shared/add_btn' %>

<script>


    // $(() => {
    //   $('img').each(function(){
    //       if ($(this).width() > $(this).height()) {
    //         $(this).addClass("landscape")
    //       }
    //     })
    // })


    // $(window).on('load', function() {
    //   $('img').each(function(){
    //     //console.log($(this))
    //     //getDim($(this))
    //     if ($(this).width() > $(this).height()) {
    //       $(this).addClass("landscape")
    //     }
    //   })
    // })

    //   document.addEventListener(" turbolinks:load", function() {
    //       $('img').each(function(){
    //       //console.log($(this))
    //       //getDim($(this))
    //       if ($(this).width() > $(this).height()) {
    //         $(this).addClass("landscape")
    //       }
    //     })
    // })
</script>

<%# <script>

        $('#main').css({
          'opacity':'1',
          'transition': 'opacity 0.5s'
          });

    </script> %>